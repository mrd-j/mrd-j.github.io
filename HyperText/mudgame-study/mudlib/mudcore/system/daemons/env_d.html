<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd" >
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="/interrupter/myStyle.css"></link>
    <script type="text/javascript" src="/js/myScript.js"></script>
</head>
<body>
<pre>
/*****************************************************************************
Copyright: 2021, Mud.Ren
File name: env_d.c
Description: 游戏配置守护进程
Author: xuefeng
Version: v1.0
Date: 2021-04-01
说明：游戏中自定义配置的存取，推荐直接使用env(key, void | value)来读或写配置
*****************************************************************************/
inherit CORE_DBASE;

#define ENV_FILE DATA_DIR ".env"

void create()
{
    string *cfg = read_lines(ENV_FILE);
    string key;
    mixed value;

    foreach (string line in cfg)
    {
        if (sscanf(line, "%s:%s", key, value) == 2)
        {
            key = trim(key);
            value = trim(value);

            if (value == "true")
            {
                value = 1;
            }
            else if (value == "false")
            {
                value = 0;
            }
            else if (is_numeric(value))
            {
                value = to_int(value);
            }

            set(key, value);
        }
    }
}






























</pre>
</body>
</html>
